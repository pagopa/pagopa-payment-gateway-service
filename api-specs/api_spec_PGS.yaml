openapi: 3.0.3 
info:   
  title: Openapi for pagopa-payment-transactions-gateway (PGS)   
  version: 0.0.1   
  description: |      
    Openapi definition for the API exposed by the *pagopa-payment-transactions-gateway* (**PGS**) and
    consumed by the pagoPA touchpoints (for example *pagopPA - checkout* via *pagoPA - ecommerce*) to
    authorize payments via the following payment gateway:
    <ol>
      <li>xpay</li>
      <li>vpos</li>
      <li>bancomatpay</li>
      <li>postepay</li>
    </ol> 
externalDocs:   
  url: https://pagopa.atlassian.net/wiki/spaces/TKM/overview
  description: Design review 
servers:
  - url: http://localhost:8080/
    description: Generated server url
paths:
  /request-payments/bancomatpay:
    put:
      tags:
        - BancomatPay
      operationId: updateTransaction
      parameters:
        - name: X-Correlation-ID
          in: header
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthMessage'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ACKMessage'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "401":
          description: Unauthorized request correlationId already processes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Unknown correlationId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "424":
          description: Error in transaction patch
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "500":
          description: Generic Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "504":
          description: Timeout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - BancomatPay
      operationId: requestPaymentToBancomatPay
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BPayPaymentRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BPayOutcomeResponse'
        "400":
          description: Bad Request mandatory parameters missing
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "401":
          description: transactionId already processed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "500":
          description: Generic Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "504":
          description: Timeout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /request-payments/bancomatpay/{requestId}:
    get:
      tags:
        - BancomatPay
      operationId: retrieve the correlationId of a BancomatPay payment request
      parameters:
        - in: path
          name: requestId
          schema:
            type: string
            format: uuid
          required: true
          description: PGS-generated GUID of the request to retrieve
          example: 77e1c83b-7bb0-437b-bc50-a7a58e5660ac
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BPayInfoResponse'
        "404":
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BPayInfoResponse'
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BPayInfoResponse'
  /request-refunds/bancomatpay:
    post:
      tags:
        - BancomatPay
      operationId: refundTransaction
      parameters:
        - name: X-Correlation-ID
          in: header
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BPayRefundRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BPayOutcomeResponse'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "500":
          description: Generic Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "504":
          description: Timeout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /request-payments/postepay/{requestId}:
    get:
      summary: PGS webview polling call for PostePay authorization
      tags:
        - PostePay
      operationId: webview-polling
      parameters:
        - in: path
          name: requestId
          schema:
            type: string
            format: uuid
          required: true
          description: PGS-generated GUID of the request to retrieve
          example: 77e1c83b-7bb0-437b-bc50-a7a58e5660ac
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/PollingResponseEntity'
        "400":
          description: Bad request - missing mandatory parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PollingResponseEntity'
        "401":
          description: transactionId already processed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PollingResponseEntity'
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PollingResponseEntity'
        "504":
          description: Timeout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PollingResponseEntity'
    delete:
      tags:
        - PostePay
      summary: refund PostePay requests
      operationId: refund-request
      parameters:
        - in: path
          name: requestId
          schema:
            type: string
            format: uuid
          required: true
          description: PGS-generated GUID of the request to retrieve
          example: 77e1c83b-7bb0-437b-bc50-a7a58e5660ac
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostePayRefundResponse'
        "404":
          description: Request doesn't exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostePayRefundResponse'
        "500":
          description: Generic Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostePayRefundResponse'
        "502":
          description: Gateway Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostePayRefundResponse'
        "504":
          description: Request timeout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostePayRefundResponse'
  /request-payments/postepay:
    post:
      summary: payment authorization request to PostePay
      tags:
        - PostePay
      operationId: auth-request
      parameters:
        - in: query
          name: isOnboarding
          description: used for onboarding, if true
          example: true
          schema:
            type: boolean
          required: false
        - in: header
          name: X-Client-ID
          description: channel origin (APP/Web)
          example: 77e1c83b-7bb0-437b-bc50-a7a58e5660ac
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: MDC-Fields
          description: MDC information
          example: 97g10t83x7bb0437bbc50sdf58e970gt
          schema:
            type: string
          required: false
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostePayAuthRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/PostePayAuthResponseEntity'
        "400":
          description: Bad request - missing mandatory parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostePayAuthResponseEntity'
        "401":
          description: transactionId already processed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostePayAuthResponseEntity'
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostePayAuthResponseEntity'
        "504":
          description: Timeout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostePayAuthResponseEntity'
    put:
      tags:
        - PostePay
      summary: authorization outcome response from PostePay
      operationId: auth-response
      parameters:
        - name: X-Correlation-ID
          in: header
          required: true
          description: PostePay correlation ID
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthMessage'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ACKMessage'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "401":
          description: Unauthorized - idPostePay already processed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Unknown idPostePay
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "500":
          description: Generic Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "504":
          description: Request timeout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /xpay/authorizations:     
    post:       
      summary: New authorization with xpay       
      description: Creation of a new authorization with *xpay* and return url on which to complete the frontend authorization 3DS2 flow       
      tags:         
        - XPay       
      operationId: new-authorization-xpay       
      parameters:         
      - in: header           
        name: x-client-id           
        description: touchpoint client           
        schema:             
          type: string             
          enum:             
          - ECOMMERCE_CHECKOUT             
          - ECOMMERCE_APP_IO           
        required: true         
      - in: header           
        name: MDC-Fields           
        description: MDC information
        example: 97g10t83x7bb0437bbc50sdf58e970gt             
        schema:             
          type: string           
        required: false       
      requestBody:         
        content:           
          application/json:             
            schema:
              $ref: '#/components/schemas/XPayPaymentAuthorizationRequest'
        required: true       
      responses:         
        "202":           
          description: Authorization requested           
          content:             
            application/json:
              schema:                 
                $ref: '#/components/schemas/XPayPaymentAuthorizationRequestAccepted'         
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XPayPaymentAuthorizationError'
        "409":
          description: transactionId already processed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XPayPaymentAuthorizationError'
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XPayPaymentAuthorizationError'
  /xpay/authorizations/{paymentAuthorizationId}:     
    get:       
      summary: Retrieve xpay payment authorization
      description:  Retrieve xpay payment authorization given paymentAuthorizationId
      tags:         
        - XPay
      operationId: get-auth-payment-xpay
      parameters:         
      - in: path           
        required: true
        name: paymentAuthorizationId
        description: Id of the payment authorization
        example: "41bc2409-5926-4aa9-afcc-797c7054e467"           
        schema:
          type: string
      - in: header
        name: MDC-Fields
        description: MDC information
        example: 97g10t83x7bb0437bbc50sdf58e970gt
        schema:
          type: string
        required: false
      responses:
        "200":
          description: OK
          content:             
            application/json:
              schema:
                $ref: '#/components/schemas/XPayPaymentAuthorization'     
        "404":           
          description: payment authorization not found           
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XPayPaymentAuthorizationError'
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XPayPaymentAuthorizationError' 
    delete:
      tags:
        - XPay
      summary: refund xpay requests
      description:  Refund xpay payment authorization given paymentAuthorizationId
      operationId: refund-auth-payment-xpay
      parameters:
        - in: path
          name: paymentAuthorizationId
          schema:
            type: string
            format: uuid
          required: true
          description: PGS-generated GUID of the request to retrieve
          example: 77e1c83b-7bb0-437b-bc50-a7a58e5660ac
      responses:
        "200":
          description: OK
          content:             
            application/json:
              schema:
                $ref: '#/components/schemas/XPayPaymentAuthorization'     
        "404":           
          description: payment authorization not found           
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XPayPaymentAuthorizationError'
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XPayPaymentAuthorizationError' 
  /xpay/authorizations/{paymentAuthorizationId}/resume:     
    get:       
      summary: Resume of a xpay payment authorization       
      description: Resume of a xpay payment authorization and redirect on touchpoint client frontend
      tags:
      - XPay
      operationId: resume-auth-payment-xpay
      parameters:         
        - name: paymentAuthorizationId           
          in: path           
          required: true           
          schema:             
            type: string         
        - name: esito           
          in: query
          required: false
          schema:
            type: string
        - name: idOperazione
          in: query
          required: false
          schema:
            type: string
        - name: xpayNonce
          in: query
          required: false
          schema:
            type: string
        - name: timeStamp
          in: query
          required: false
          schema:
            type: string
        - name: mac
          in: query
          required: false
          schema:
            type: string
        - name: resumeType
          in: query
          required: false
          schema:
            type: string
      responses:
        "302":
          description: Resume completed
          headers:
            Location:
              description: client Url 
              schema:
                type: string
                format: uri
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/XPayPaymentAuthorizationError'
  /vpos/authorizations:
    post:
      summary: New authorization with Vpos
      description: Creation of a new authorization with vpos and return url on which to complete the frontend authorization 3DS2 flow
      tags:
        - Vpos
      operationId: step0-creditCard
      parameters:
        - in: header
          name: X-Client-ID
          description: channel origin (APP/Web)
          example: APP
          schema:
            type: string
          required: true
        - in: header
          name: MDC-Fields
          description: MDC information
          example: 97g10t83x7bb0437bbc50sdf58e970gt
          schema:
            type: string
          required: false
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreditCardAuthRequest'
        required: true
      responses:
        "202":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreditCardAuthResponse'
        "400":
          description: Bad request - missing mandatory parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreditCardAuthResponseBadRequest'
        "401":
          description: transactionId already processed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreditCardAuthResponseUnauthorized'
        "500":
          description: generic error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreditCardAuthResponseGenericError'
  /vpos/authorizations/{paymentAuthorizationId}:
    get:
      summary: retrieve vpos payment authorization
      tags:
        - Vpos
      parameters:
        - in: path
          required: true
          name: paymentAuthorizationId
          description: Id of the request
          example: "41bc2409-5926-4aa9-afcc-797c7054e467"
          schema:
            type: string
        - in: header
          name: MDC-Fields
          description: MDC information
          example: 97g10t83x7bb0437bbc50sdf58e970gt
          schema:
            type: string
          required: false
      responses:
        "200":
          description: OK
          content:
            'application/json':
              schema:
                oneOf:
                  - $ref: '#/components/schemas/CcPaymentInfoAcceptedResponse'
                  - $ref: '#/components/schemas/CcPaymentInfoAcsResponse'
                  - $ref: '#/components/schemas/CcPaymentInfoAuthorizedResponse'
        "404":
          description: Not Found
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/CcPaymentInfoError'
    delete:
      summary: delete vpos payment request
      tags:
        - Vpos
      parameters:
        - in: path
          required: true
          name: paymentAuthorizationId
          description: Id of the request
          example: "41bc2409-5926-4aa9-afcc-797c7054e467"
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/VposDeleteResponse'
        "404":
          description: Not Found
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/VposDeleteResponse404'
        "500":
          description: Internal Server Error
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/VposDeleteResponse500'
  /vpos/authorizations/{paymentAuthorizationId}/resume/method:
    post:
      summary: resume vpos payment authorization
      tags:
        - Vpos
      parameters:
        - in: path
          required: true
          name: paymentAuthorizationId
          description: Id of the request
          example: "41bc2409-5926-4aa9-afcc-797c7054e467"
          schema:
            type: string
            format: UUID
        - in: header
          name: MDC-Fields
          description: MDC information
          example: "97g10t83x7bb0437bbc50sdf58e970gt"
          schema:
            type: string
          required: false
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreditCardResumeRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/VposResumeResponse'
  /vpos/authorizations/{paymentAuthorizationId}/resume/challenge:
    post:
      summary: resume vpos payment request
      tags:
        - Vpos
      parameters:
        - in: path
          required: true
          name: paymentAuthorizationId
          description: Id of the request
          example: "41bc2409-5926-4aa9-afcc-797c7054e467"
          schema:
            type: string
        - in: header
          name: MDC-Fields
          description: MDC information
          example: "97g10t83x7bb0437bbc50sdf58e970gt"
          schema:
            type: string
          required: false
      responses:
        "302":
          description: "FOUND, Redirect to url"
  /vpos/authorizations/{paymentAuthorizationId}/method/notifications:
    post:
      summary: created webView to execute 'method'
      tags:
        - Vpos
      parameters:
        - in: path
          required: true
          name: paymentAuthorizationId
          description: Id of the request
          example: "41bc2409-5926-4aa9-afcc-797c7054e467"
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: OK, returns html
          content:
            text/html: {}
components:
  schemas:
    AuthMessage:
      required:
        - auth_outcome
      type: object
      properties:
        auth_outcome:
          type: string
          enum:
            - OK
            - KO
        auth_code:
          type: string
    ACKMessage:
      required:
        - outcome
      type: object
      properties:
        outcome:
          type: string
          enum:
            - OK
            - KO
    BPayPaymentRequest:
      required:
        - amount
        - encryptedTelephoneNumber
        - idPagoPa
        - idPsp
      type: object
      properties:
        idPsp:
          type: string
        idPagoPa:
          type: integer
          format: int64
        amount:
          type: number
          format: double
        subject:
          type: string
        encryptedTelephoneNumber:
          type: string
        language:
          type: string
    BPayRefundRequest:
      required:
        - idPagoPa
      type: object
      properties:
        idPagoPa:
          type: integer
          format: int64
        refundAttempt:
          type: number
          format: integer
        subject:
          type: string
        language:
          type: string
    BPayOutcomeResponse:
      type: object
      properties:
        outcome:
          type: boolean
    PollingResponseEntity:
      type: object
      required:
        - channel
        - urlRedirect
        - logoResourcePath
        - clientResponseUrl
        - authOutcome
        - error
      properties:
        channel:
          type: string
          description: request payment channel (APP or WEB)
          example: APP
        urlRedirect:
          type: string
          description: redirect URL generated by PGS logic
          example: "https://.../payment-transactions-gateway/v1/webview/authRequest?requestId=e2f518a9-9de4-4a27-afb0-5303e6eefcbf"
        logoResourcePath:
          type: string
          description: PostePay logo resource path
          example: "payment-gateway/assets/img/postepay/postepay.png"
        clientResponseUrl:
          type: string
          description: redirect URL for authorization OK, empty for KO case or when PUT request has not been called yet
          example: "https://..."
        authOutcome:
          type: string
          description: authorization outcome
          example: OK
        error:
          type: string
          description: "error description for 400/500 http error codes"
          example: ""
    PostePayAuthRequest:
      required:
        - grandTotal
        - idTransaction
      type: object
      properties:
        grandTotal:
          type: number
          format: integer
          description: amount + fee as euro cents
          example: 2350
        idTransaction:
          type: string
          description: transaction id on Payment Manager
          example: "e8c7a6bf-0e52-45b0-b62e-03ae29b59522"
        description:
          type: string
          description: payment object description
          example: pagamento bollo auto
        paymentChannel:
          type: string
          description: request payment channel (APP or WEB)
          example: APP
        name:
          type: string
          description: debtor's name and surname
          example: Mario Rossi
        email_notice:
          type: string
          description: debtor's email address
          example: mario.rossi@gmail.com
    PostePayAuthResponseEntity:
      type: object
      required:
        - requestId
        - channel
        - urlRedirect
        - error
      properties:
        requestId:
          type: string
          description: payment request Id
        channel:
          type: string
          description: request payment channel (APP or WEB)
          example: APP
        urlRedirect:
          type: string
          description: redirect URL generated by PGS logic
          example: "https://api.dev.platform.pagopa.it/payment-transactions-gateway/v1/webview/authRequest/e8d24dd5-14e0-4802-9f23-ddf2c198a185"
        error:
          type: string
          description: error description
          example: null #valued when a different response from 200 is obtained
    Error:
      type: object
      properties:
        code:
          type: integer
          format: int64
        message:
          type: string
      required:
        - code
        - message
    PostePayRefundResponse:
      type: object
      properties:
        requestId:
          type: string
        paymentId:
          type: string
        error:
          type: string
      required:
        - transactionId
        - paymentId
        - error
    XPayPaymentAuthorizationRequest:
      required:
        - cvv
        - pan
        - expiryDate
        - grandTotal
        - idTransaction
      type: object
      properties:
        grandTotal:
          type: number
          format: integer
          description: amount + fee as euro cents
          example: 2350
        idTransaction:
          type: string
          description: transaction id on Payment Manager
          example: "123456"
        cvv:
          type: string
          description: Card verification code
          example: 123
        pan:
          type: string
          description: Pan of the card
          example: 16589654852
        exipiryDate:
          type: string
          description: Expiration date of the card, yyyyMM format
          example: 203012
    XPayPaymentAuthorizationRequestAccepted:       
      type: object
      required:
        - requestId
        - urlRedirect
        - timeStamp
       properties:
        paymentAuthorizationId:
          type: string
          description: payment authorization Id         
        urlRedirect:
          type: string
          description: redirect URL generated by PGS logic to complete authorization frontend flow  
          example: "urlRedirect.com"
        timeStamp:
          type: string
          description: timeStamp
          example: 1667484646944
    XPayPaymentAuthorizationError:
      type: object
      required:
        - errorDetail
      properties:
        errorDetail:
          type: string
          description: error detail
          example: Bad Request - mandatory parameters missing      
    XPayPaymentAuthorization:
      type: object
      required:
        - status
        - paymentAuthorizationId
      properties:
        html:
          type: string
          description: HTML received in response from XPay
          example: "\u003chtml\u003e\n\u003chead\u003e\n\u003ctitle\u003e\nGestione Pagamento Fraud detection\u003c/title\u003e\n\u003cscript type\u003d\"text/javascript\" language\u003d\"javascript\"\u003e\nfunction moveWindow() {\n    document.tdsFraudForm.submit();\n}\n\u003c/script\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cform name\u003d\"tdsFraudForm\" action\u003d\"https://coll-ecommerce.nexi.it/ecomm/ecomm/TdsMerchantServlet\" method\u003d\"POST\"\u003e\n\u003cinput type\u003d\"hidden\" name\u003d\"action\"     value\u003d\"fraud\"\u003e\n\u003cinput type\u003d\"hidden\" name\u003d\"merchantId\" value\u003d\"31320986\"\u003e\n\u003cinput type\u003d\"hidden\" name\u003d\"description\" value\u003d\"7090069933_1606392234626\"\u003e\n\u003cinput type\u003d\"hidden\" name\u003d\"gdiUrl\"      value\u003d\"\"\u003e\n\u003cinput type\u003d\"hidden\" name\u003d\"gdiNotify\"   value\u003d\"\"\u003e\n\u003c/form\u003e\n\u003cscript type\u003d\"text/javascript\"\u003e\n  moveWindow();\n\u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"
        paymentAuthorizationId:
          type: string
          description: payment authorization Id
          example: affd8e24-f99a-406f-9ded-67a4a20c097f
        status:
          type: string
          enum: [CREATED, AUTHORIZED, DENIED, REFUNDED]
          description: status
          example: CREATED
        outcomeXpayGateway:
         $ref: '#/components/schemas/OutcomeXpayGateway'
        authCode:
          type: string
          description: authorization code received from XPay
          example: 123
        redirectUrl:
          type: string
          description: redirection URL after a response from XPay has been received
          example: "http://localhost:8080/payment-gateway/request-payments/xpay/2d75ebf8-c789-46a9-9a22-edf1976a8917"
    BPayInfoResponse:
      type: object
      properties:
        correlationId:
          type: string
          example: "7cbf110b-6ebe-49ed-ab39-cd2f35339622"
        errorMessage:
          type: string
          example: "RequestId 77e1c83b-7bb0-437b-bc50-a7a58e5660ac has not been found"
      required:
        - correlationId
    CreditCardAuthRequest:
      required:
        - idTransaction
        - amount
        - pan
        - securitycode
        - expireDate
        - holder
        - circuit
        - threeDsData
        - emailCh
        - isFirstPayment
        - idPsp
      type: object
      properties:
        idTransaction:
          type: string
          description: transaction id on Payment Manager
          example: "123456"
        amount:
          type: number
          example: 12456
        pan:
          type: string
          description: Pan of the card
          example: 16589654852
        securitycode:
          type: string
          description: Card verification code
          example: 123
        expireDate:
          type: string
          description: Expiration date of the card, yyyyMM format
          example: 203012
        holder:
          type: string
          example: "Mario rossi"
        circuit:
          type: string
          example: "AMEX"
        threeDsData:
          type: string
          example: "threeDsData"
        emailCh:
          type: string
          example: "mariorossi@gmail.com"
        isFirstPayment:
          type: boolean
          example: true
        idPsp:
          type: string
          example: "23456789876"
    CreditCardAuthResponse:
      type: object
      required:
        - requestId
        - urlRedirect
        - timeStamp
      properties:
        requestId:
          type: string
          description: payment request Id
        urlRedirect:
          type: string
          description: redirect URL generated by PGS logic
          example: "urlRedirect.com"
        timeStamp:
          type: string
          description: timeStamp
          example: 1667484646944
    CreditCardAuthResponseBadRequest:
      type: object
      required:
        - error
      properties:
        error:
          type: string
          description: error description
          example: Bad Request - mandatory parameters missing
    CreditCardAuthResponseUnauthorized:
      type: object
      required:
        - error
      properties:
        error:
          type: string
          description: error description
          example: Transaction already processed
    CreditCardAuthResponseGenericError:
      type: object
      required:
        - error
      properties:
        error:
          type: string
          description: error description
          example: Generic error
    CcPaymentInfoAcceptedResponse:
      type: object
      properties:
        status:
          type: string
          enum: [CREATED, AUTHORIZED, DENIED, CANCELLED]
        requestId:
          type: string
        vposUrl:
          type: string
        redirectUrl:
          type: string
        threeDsMethodData:
          type: string
          format: base64
        creq:
          type: string
          format: base64
      required:
        - status
        - requestId
    CcPaymentInfoAcsResponse:
      type: object
      properties:
        status:
          type: string
          enum: [CREATED, AUTHORIZED, DENIED, CANCELLED]
        responseType:
          type: string
          enum: [METHOD, CHALLENGE, AUTHORIZATION, ERROR]
        requestId:
          type: string
        vposUrl:
          type: string
        threeDsMethodData:
          type: string
          format: base64
        creq:
          type: string
          format: base64
      required:
        - status
        - responseType
        - requestId
        - vposUrl
    CcPaymentInfoAuthorizedResponse:
      type: object
      properties:
        status:
          type: string
          enum: [CREATED, AUTHORIZED, DENIED, CANCELLED]
        requestId:
          type: string
        redirectUrl:
          type: string
        creq:
          type: string
          format: base64
        outcomeVposGateway:
         $ref: '#/components/schemas/OutcomeVposGateway'
        authCode:
          type: string
          description: authorization code received from XPay
          example: 123
      required:
        - status
        - requestId
        - redirectUrl
        - authCode
    CcPaymentInfoError:
      type: object
      properties:
        redirectUrl:
          type: string
        status:
          type: string
          enum: [DENIED, CANCELLED]
        requestId:
          type: string
      required:
        - status
        - requestId
        - redirectUrl
    CreditCardResumeRequest:
      type: object
      required:
        - methodCompleted
      properties:
        methodCompleted:
          type: string
          example: "Y"
    VposResumeResponse:
      type: object
      required:
        - requestId
      properties:
        requestId:
          type: string
          format: uuid
          example: "1f3af548-f9d3-423f-b7b0-4e68948d41d2"
    VposDeleteResponse:
      type: object
      required:
        - requestId
        - status
      properties:
        requestId:
          type: string
        status:
          type: string
          enum: [CREATED, AUTHORIZED, DENIED, CANCELLED]
        error:
          type: string
          description: "null if no error occurred"
    VposDeleteResponse404:
      type: object
      required:
        - requestId
        - error
      properties:
        requestId:
          type: string
        status:
          type: string
          enum: [CREATED, AUTHORIZED, DENIED, CANCELLED]
        error:
          type: string
    VposDeleteResponse500:
      type: object
      required:
        - requestId
        - status
        - error
      properties:
        requestId:
          type: string
        status:
          type: string
          enum: [CREATED, AUTHORIZED, DENIED, CANCELLED]
        error:
          type: string
    OutcomeVposGateway:
      type: object
      properties:
        outcome:
         type: string
         enum:
         - OK
         - KO
        rrn:
         type: string
        authorizationCode:
          type: string
        errorCode:
         type: string
         description: error code received from Vpos - https://github.com/pagopa/pagopa-wisp2.0-pp-server/blob/ff0e8e3354fc11d296fe5547b9b00941ead64e96/pp-server/pp-dto/src/main/java/com/pagopa/utils/VposResultCodeEnum.java
         enum: 
          - '00'
          - '01'
          - '02'
          - '03'
          - '04'
          - '05'
          - '06'
          - '07'
          - '08'
          - '09'
          - '10'
          - '11'
          - '12'
          - '13'
          - '16'
          - '17'
          - '20'
          - '21'
          - '25'
          - '26'
          - '35'
          - '37'
          - '38'
          - '40'
          - '41'
          - '50'
          - '51'
          - '98'
          - '99'
      required:
      - outcome
    OutcomeXpayGateway:
      type: object
      properties:
        outcome:
         type: string
         enum:
         - OK
         - KO
        authorizationCode:
          type: string
        errorCode:
         type: number
         description: error code received from XPay - https://ecommerce.nexi.it/specifiche-tecniche/tabelleecodifiche/codicierroreapirestful.html
         enum: 
           - 1
           - 2
           - 3
           - 4
           - 5
           - 7
           - 8
           - 9
           - 12
           - 13
           - 14
           - 15
           - 16
           - 17
           - 18
           - 19
           - 20
           - 21
           - 22
           - 50
           - 96
           - 97
           - 98
           - 99
           - 100
      required:
      - outcome
        